<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>6.1. Designing New Commands</title></head>
<STYLE TYPE="text/css">
<!--
.oval, .oval TD
{
background-image:url('../doc_images/ovoid.png');
color:white;
}
.wiarrow, .wiarrow TD
{
background-image:url('../doc_images/wiarrow.png');
color:white;
}
.rbarrow, .rbarrow TD
{
background-image:url('../doc_images/rbarrow.png');
color:white;
}
-->
</STYLE>
<body bgcolor="#FFFFE0">
<!-- SEARCH TITLE "Designing New Commands" -->
<!-- SEARCH SECTION "6.1" -->
<!-- SEARCH SORT "006-001-000" -->
<font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><table CELLPADDING=0 CELLSPACING=0 width="100%" bgcolor="#000000"><tr><TD width=38px height=26px align="center" valign="center"><a href=Rdoc26.html border=0><img border=0 src=../doc_images/Hookleft.png id="hookleft" style="height: 24px; width: 32px;" border=0></a></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><a href=../Rchap6.html STYLE="text-decoration: none"><font color="#FFFFE0" size=2>Chapter 6: Commands</font></a></td><TD width=56px height=26px align="right" valign="center"><a href=../Rindex.html border=0><img border=0 src=../doc_images/Hookup.png id="hookup" style="height: 24px; width: 24px;" border=0></a><a href=Rdoc28.html border=0><img border=0 src=../doc_images/Hookright.png id="hookright" style="height: 24px; width: 32px;" border=0></a></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD height=8px halign="center" valign="center"></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD width=38px halign="center" valign="center"></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><font color="#000000" size="3"><b>6.1. Designing New Commands</b></font></td></tr></table>
<p>
<p>Quite a bit of interactive fiction design involves the creation of custom commands to expand on the library's existing set. There is more to know than we can review in this section; instead, this is to serve as an overview of the process, with hints about where in <i>Writing with Inform</i> we might find more technical details.
<p>
<p>Before we even start to write our source text, we should think about the following things:
<p>
<blockquote><font color="#000080">(1) What words will the player use to make this new action happen?
<br>(2) What will the action change about the world model?
<br>(3) What circumstances might make the new action go wrong or produce silly outcomes?
</font></blockquote><p>
<p>
<p>To take these one one by one:
<p>
<p>(1) We may have a general idea of the phrasing we want the player to use -- say we want to add an SHOOT command which allows the player to fire a gun at something. (This is an intentionally tricky choice of verb, because it shows off so many possibilities.) So we might decide the base form of the action will be
<p>
<blockquote><font color="#000080">SHOOT THE PISTOL AT HENRY
</font></blockquote><p>
<p>
<p>So now we're going to need an action that applies to two objects -- the pistol as the noun, and Henry as the second noun. The problem is, though, that there are lots of other ways that the player could reasonably formulate the command, some of which leave out information:
<p>
<blockquote><font color="#000080">SHOOT HENRY
<br>SHOOT PISTOL
<br>FIRE PISTOL
<br>SHOOT AT HENRY
<br>SHOOT AT HENRY WITH GUN
</font></blockquote><p>
<p>
<p>To avoid frustrating the player, we should make a guess about what the player means whenever we're sure that guess will be reliable (we might, for instance, have only one gun in the game, so we know that SHOOT HENRY will always mean SHOOT HENRY WITH PISTOL), but ask the player for clarification whenever there might be ambiguity (SHOOT PISTOL gives no clue about the target, nor can we safely guess, so we want Inform to ask &quot;What do you want to shoot the pistol at?&quot;). The next section goes into more detail about how to handle these variations.
<p>
<p>Conversely, there are cases where the player is offering too <i>much</i> information for the command we've defined - say we have a BURN command which doesn't look for a specified fire source, but the player is trying to BURN BOX WITH MATCH. We probably don't want to throw away the extraneous information as though it had never been typed, because the player might have typed something quite specific. BURN BOX WITH ACID, say, should not be cavalierly reinterpreted as BURN BOX (with a fire source). Instead, we want to give the player a bit of gentle guidance, perhaps using &quot;Understand as a mistake&quot;, as in
<p>
<blockquote><font color="#000080">Understand &quot;burn [something] with [text]&quot; as a mistake (&quot;Your choice of lighter isn't important in this game: BURN SOMETHING will suffice.&quot;)
</font></blockquote><p>
<p>
<p>Finally, there are some cases where we want to understand a phrase to mean a specific form of a more general action. For instance, we might want TURN DOWN THE MUSIC to mean the same thing as SET VOLUME KNOB TO 1. In this case, we may want to make a sort of dummy action which converts into the main action, as in
<p>
<blockquote><font color="#000080">Understand &quot;turn down volume&quot; or &quot;turn down music&quot; or &quot;turn down the volume&quot; or &quot;turn down the music&quot; as lowering the volume. Lowering the volume is an action applying to nothing.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Instead of lowering the volume, try setting the volume knob to 1.
</font></blockquote><p>
<p>
<p>More about this can be found later in this chapter, under Remembering, Converting and Combining Actions.
<p>
<p>Sometimes these kinds of details can be caught in play-testing, but it's a good idea to think about them specifically and in advance rather than leaving them to our beta-testers to sort out.
<p>
<p>(2) To generalize very broadly, there are two possible kinds of command in IF: those that only exist give the player new information (like EXAMINE, INVENTORY, LOOK, TASTE), and those that change the world model (like TAKE FISH, OPEN DOOR, UNLOCK GATE WITH BLUE KEY). The Inform library has some commands that really do none of these things by default - commands like JUMP that do nothing interesting at all most of the time - but those exist as hooks, in case there is ever something important for them to do.
<p>
<p>Commands that ask for information are usually easier to implement. Very often we're looking to offer the player a new kind of information about specific objects, and these can be handled by adding new text properties, as in
<p>
<blockquote><font color="#000080">A thing has some text called the sacred emanation.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Carry out perceiving something:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;[sacred emanation of the noun][paragraph break]&quot;.
</font></blockquote><p>
<p>
<p>Commands that affect the world model, on the other hand, can range from simple to very complex indeed. Sometimes we need to do nothing more than add an attribute to an object, like
<p>
<blockquote><font color="#000080">A thing can be folded or flat. A thing is usually flat.
</font></blockquote><p>
<p>
<p>so that our FOLD command can change the object into its folded form. At other times, we need quite intricate rules to account for a subtle multi-stage process - how fire is burning and spreading to objects, say, or how a conversation is progressing. Other parts of the Recipe Book offer solutions to some of these challenges.
<p>
<p>(Strictly, we might count a third kind of command: the kind that controls the game itself. The Advanced Actions chapter discusses how to add actions out of world, as these are called, but the difficult ones are already built into Inform - saving, restoring, restarting, undoing a turn, and so on. Mostly when we need to add new actions out of world, they will be help or hint systems of some kind. More about these can be found in the Helping and Hinting section of the Recipe Book, under Out of World Actions and Effects.)
<p>
<p>(3) Most commands that change the world require certain preconditions: the player needs to be holding the gun before he can fire it; the gun must be loaded with ammunition; if we're being especially detailed in our simulation, the safety must be off.
<p>
<p>Often, there are also subtler details about how the command should interact with special items. For any new command we create, it's worth asking: should anything special happen if the player performs this action...
<p>
<blockquote><font color="#000080">On himself?
<br>On another living character?
<br>On an object he (or another character) is carrying or wearing?
<br>On an object he (or another character) is inside or on?
<br>On a door?
<br>On an object that is impossible to move (defined as &quot;scenery&quot; or &quot;fixed in place&quot;)?
<br>On an intangible object (such as a beam of sunlight)?
<br>On an object far away (such as the sun)?
<br>On an object that is part of something else (such as a doorknob)?
<br>On an object that itself has parts (such as a desk with drawers)?
<br>If there are two objects required by the action, can both the noun and the second noun be the same thing?
</font></blockquote><p>
<p>
<p>For instance, we might have written code so that if the gun is fired at anything but a person or a fragile object, the default response is &quot;The bullet bounces harmlessly off [the second noun].&quot; Our checklist would remind us to write special cases to prevent
<p>
<blockquote><font color="#000080">SHOOT GUN AT MY SHOE (while he's wearing it)
<br>SHOOT GUN AT ME
<br>SHOOT GUN AT GUN
</font></blockquote><p>
<p>
<p>and so on. Actions that destroy objects are especially tricky, because there are many things that aren't safe to destroy without carefully adjusting the world model. (What happens if we burn a door connecting two rooms? a wooden desk with a drawer containing an asbestos vest? the armchair Cousin Fred is sitting on?)
<p>
<p><hr><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td width="33%" align="left"><a href=Rdoc26.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Previous</font></a></td><td width="33%" align="center"><a href=../Rindex.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Contents</font></a></td><td width="33%" align="right"><a href=Rdoc28.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Next</font></a></td></tr></table></font></body></html>
