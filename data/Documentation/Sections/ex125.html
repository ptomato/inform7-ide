<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>19.13. Writing, reading and appending text to files</title></head>
<STYLE TYPE="text/css">
<!--
.oval, .oval TD
{
background-image:url('../doc_images/ovoid.png');
color:white;
}
.wiarrow, .wiarrow TD
{
background-image:url('../doc_images/wiarrow.png');
color:white;
}
.rbarrow, .rbarrow TD
{
background-image:url('../doc_images/rbarrow.png');
color:white;
}
-->
</STYLE>
<body bgcolor="#ffffff">
<!-- SEARCH TITLE "The Fifth Body" -->
<!-- SEARCH SECTION "Ex 344" -->
<!-- SEARCH SORT "Ex 019-013-344" -->
<font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><table CELLPADDING=0 CELLSPACING=0 width="100%" bgcolor="#000000"><tr><TD width=38px height=26px align="center" valign="center"><a href=doc326.html border=0><img border=0 src=../doc_images/Hookleft.png id="hookleft" style="height: 24px; width: 32px;" border=0></a></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><a href=../chap19.html STYLE="text-decoration: none"><font color="#FFFFFF" size=2>Chapter 19: Figures, Sounds and Files</font></a></td><TD width=56px height=26px align="right" valign="center"><a href=../index.html border=0><img border=0 src=../doc_images/Hookup.png id="hookup" style="height: 24px; width: 24px;" border=0></a><a href=doc328.html border=0><img border=0 src=../doc_images/Hookright.png id="hookright" style="height: 24px; width: 32px;" border=0></a></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD height=8px halign="center" valign="center"></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD width=38px halign="center" valign="center"></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><font color="#000000" size="3"><b>19.13. Writing, reading and appending text to files</b></font></td></tr></table>
<p>
<p>Text can also be saved to a file, and again all file-handling is automatic:
<p>
<blockquote><font color="#000080">write &quot;Jackdaws love my big sphinx of quartz.&quot; to the file of Abecedary Wisdom;
<br>append &quot;Jinxed wizards pluck ivy from the big quilt.&quot; to the file of Abecedary Wisdom;
</font></blockquote><p>
<p>
<p>The difference between &quot;write&quot; and &quot;append&quot; here is that &quot;write&quot; makes this text the entire contents of the file, whereas &quot;append&quot; adds it the end (creating the file if it did not previously exist).
<p>
<p>The quoted text can, of course, contain substitutions, so can be long and complex if need be.
<p>
<p>Text from a file is printed back with the text substitution:
<p>
<blockquote><font color="#000080">&quot;[text of the File of Abecedary Wisdom]&quot;
</font></blockquote><p>
<p>
<p>To copy one file to another, for instance,
<p>
<blockquote><font color="#000080">write &quot;[text of the file of Abecedary Wisdom]&quot; to the file of Secondary Wisdom;
</font></blockquote><p>
<p>
<p><hr><p>
<a name="e17"><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=ex17.html#e17 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>343</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=ex17.html#e17 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;Example&nbsp;</font> <font color="#000000"> The Fourth Body</font></b></a><br>Notebooks in which the player can record assorted notes throughout play.<p></td><td halign="right" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="rbarrow"><TD width=38px height=30px align="left" valign="center"><a  href=Rex17.html#e17 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><i>RB</i></div></a></TD></TR></TABLE></td></tr></table>
<!-- EXAMPLE START -->
<a name="e125"><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=doc327.html#e125 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>344</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=doc327.html#e125 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;<b>Example</b>&nbsp;</font> <font color="#000000"> The Fifth Body</font></b></a><br>An expansion on the notebook, allowing the player somewhat more room in which to type his recorded remark.<p></td><td halign="right" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="rbarrow"><TD width=38px height=30px align="left" valign="center"><a  href=Rex125.html#e125 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><i>RB</i></div></a></TD></TR></TABLE></td></tr></table>
<table border=0 bgcolor="#f0f0f0" width=100%><tr><td><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2>
<p>
<p>The implementation here is much like that of the previous example, except that we allow the player to write his notebook input as a separate command, leading to an exchange such as
<p>
<blockquote><font color="#000080">>write in my notebook
<br>You open your notebook and prepare to write in it.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">>>Am beginning to think that HT and BGG are in this together.
<br>You finish writing and fold your notebook away.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">>read my notebook
<br>You read:
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Wednesday morning
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Am beginning to think that HT and BGG are in this together.
</font></blockquote><p>
<p>
<p>The opening is much as before:
<p>
<blockquote><font color="#000080"><script language="JavaScript">
function pasteCode433(code) {
    var myProject = external.Project;

    myProject.selectView('source');
    myProject.pasteCode('"The Fifth Body"\n\nA jotter is a kind of thing. A jotter has an external-file called the text file. A jotter can be fresh or used. A jotter is usually fresh. A jotter has a text called the heading.\n\nThe currently erased jotter is an object that varies.\n\nTo erase (pad - a jotter):\n\tnow the currently erased jotter is the pad;\n\twrite "[heading of the currently erased jotter][paragraph break]" to the text file of the pad;\n\tnow the pad is fresh.\n\nTo write in (pad - a jotter):\n\tappend "[the time of day]: [player\'s command][line break]" to the text file of the pad;\n\tnow the pad is used.\n\nTo read (pad - a jotter):\n\tsay "You read: [paragraph break][text of the text file of the pad]".\n\nWhen play begins:\n\trepeat with pad running through jotters\n\tbegin;\n\t\terase the pad;\n\tend repeat.\n\nInstead of examining a used jotter (called the pad):\n\tread the pad.\n\nInstead of examining a fresh jotter (called the pad):\n\tsay "There is nothing of note in [the pad]."\n\nTarget jotter is an object that varies. The target jotter is usually nothing.\n\nUnderstand "write in [something preferably held]" as writing in. Writing in is an action applying to one thing.\n\nCheck writing in:\n\tif the noun is not a jotter, say "It would be better to write in a notebook." instead.\n\nCarry out writing in:\n\tchange the command prompt to ">>";\n\tchange the target jotter to the noun;\n\nReport writing in:\n\tsay "You open [the noun] and prepare to write in it."\n\n[Now what happens is that the player, having typed WRITE IN NOTEBOOK, will be faced with a ">>" prompt instead of the usual ">": a sign that the input mode has changed.]\n\n[The next code is to react to reading a command. Whatever the player types at the >> prompt when the target jotter is set will now be recorded in the notebook, though with a character limit of about 60-100 characters depending on how much upper-case and punctuation he uses. (There are ways to lift the character length restriction as well, but they would take us into deeper waters.)]\n\nAfter reading a command when target jotter is a jotter:\n\tchange the command prompt to ">";\n\twrite in target jotter;\n\tnow target jotter is used;\n\tsay "You finish writing and fold your notebook away.";\n\tchange the target jotter to nothing;\n\treject the player\'s command.\n\nUnderstand "erase [something preferably held]" as erasing. Erasing is an action applying to one carried thing.\n\nCheck erasing:\n\tif the noun is not a jotter, say "It\'s hard to see how." instead.\n\nCarry out erasing:\n\terase the noun.\n\nReport erasing:\n\tsay "You scrub out all the entries in [the noun]."\n\nThe player carries a jotter called your notebook. The file of Player\'s Observations is called "notebook". The text file of your notebook is the file of Player\'s Observations. The heading of your notebook is "Sunday Morning".\n\nThe Vestry is a room. "[Havers] hangs back by the door: the forensics expert is not finished with a preliminary examination of the body. From here you can\'t see much, except that the expert has peeled back and laid to one side a liturgical vestment that someone at the church used to cover the corpse until the police came. What was once a cream silk with festive Easter embroidery is now stained with blood-colored handprints."\n\nDetective Havers is a woman in the Vestry. The description is "She looks glumly back. There\'s still a purple-ish bruise on her cheekbone from the disaster Thursday afternoon." Havers is scenery.\n\nHavers is carrying a jotter called Barbara\'s notebook. The file of Barbara\'s Observations is called "barbara". The text file of Barbara\'s notebook is the file of Barbara\'s Observations. The heading of Barbara\'s notebook is "Sun. AM".\n\nThe time of day is 9:11 AM.\n\n');
}
</script>
<a href="javascript:pasteCode433()"><img border=0 src=../doc_images/paste.png></a> &quot;The Fifth Body&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">A jotter is a kind of thing. A jotter has an external-file called the text file. A jotter can be fresh or used. A jotter is usually fresh. A jotter has a text called the heading.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The currently erased jotter is an object that varies.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">To erase (pad - a jotter):
<br>&nbsp;&nbsp;&nbsp;&nbsp;now the currently erased jotter is the pad;
<br>&nbsp;&nbsp;&nbsp;&nbsp;write &quot;[heading of the currently erased jotter][paragraph break]&quot; to the text file of the pad;
<br>&nbsp;&nbsp;&nbsp;&nbsp;now the pad is fresh.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">To write in (pad - a jotter):
<br>&nbsp;&nbsp;&nbsp;&nbsp;append &quot;[the time of day]: [player's command][line break]&quot; to the text file of the pad;
<br>&nbsp;&nbsp;&nbsp;&nbsp;now the pad is used.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">To read (pad - a jotter):
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;You read: [paragraph break][text of the text file of the pad]&quot;.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">When play begins:
<br>&nbsp;&nbsp;&nbsp;&nbsp;repeat with pad running through jotters
<br>&nbsp;&nbsp;&nbsp;&nbsp;begin;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erase the pad;
<br>&nbsp;&nbsp;&nbsp;&nbsp;end repeat.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Instead of examining a used jotter (called the pad):
<br>&nbsp;&nbsp;&nbsp;&nbsp;read the pad.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Instead of examining a fresh jotter (called the pad):
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;There is nothing of note in [the pad].&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Target jotter is an object that varies. The target jotter is usually nothing.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Understand &quot;write in [something preferably held]&quot; as writing in. Writing in is an action applying to one thing.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Check writing in:
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the noun is not a jotter, say &quot;It would be better to write in a notebook.&quot; instead.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Carry out writing in:
<br>&nbsp;&nbsp;&nbsp;&nbsp;change the command prompt to &quot;>>&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;change the target jotter to the noun;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Report writing in:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;You open [the noun] and prepare to write in it.&quot;
</font></blockquote><p>
<p>
<p>Now what happens is that the player, having typed WRITE IN NOTEBOOK, will be faced with a &quot;>>&quot; prompt instead of the usual &quot;>&quot;: a sign that the input mode has changed.
<p>
<p>The next code is to react to reading a command. Whatever the player types at the >> prompt when the target jotter is set will now be recorded in the notebook, though with a character limit of about 60-100 characters depending on how much upper-case and punctuation he uses. (There are ways to lift the character length restriction as well, but they would take us into deeper waters.)
<p>
<blockquote><font color="#000080">After reading a command when target jotter is a jotter:
<br>&nbsp;&nbsp;&nbsp;&nbsp;change the command prompt to &quot;>&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;write in target jotter;
<br>&nbsp;&nbsp;&nbsp;&nbsp;now target jotter is used;
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;You finish writing and fold your notebook away.&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;change the target jotter to nothing;
<br>&nbsp;&nbsp;&nbsp;&nbsp;reject the player's command.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Understand &quot;erase [something preferably held]&quot; as erasing. Erasing is an action applying to one carried thing.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Check erasing:
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the noun is not a jotter, say &quot;It's hard to see how.&quot; instead.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Carry out erasing:
<br>&nbsp;&nbsp;&nbsp;&nbsp;erase the noun.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Report erasing:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;You scrub out all the entries in [the noun].&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The player carries a jotter called your notebook. The file of Player's Observations is called &quot;notebook&quot;. The text file of your notebook is the file of Player's Observations. The heading of your notebook is &quot;Sunday Morning&quot;.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The Vestry is a room. &quot;[Havers] hangs back by the door: the forensics expert is not finished with a preliminary examination of the body. From here you can't see much, except that the expert has peeled back and laid to one side a liturgical vestment that someone at the church used to cover the corpse until the police came. What was once a cream silk with festive Easter embroidery is now stained with blood-colored handprints.&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Detective Havers is a woman in the Vestry. The description is &quot;She looks glumly back. There's still a purple-ish bruise on her cheekbone from the disaster Thursday afternoon.&quot; Havers is scenery.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Havers is carrying a jotter called Barbara's notebook. The file of Barbara's Observations is called &quot;barbara&quot;. The text file of Barbara's notebook is the file of Barbara's Observations. The heading of Barbara's notebook is &quot;Sun. AM&quot;.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The time of day is 9:11 AM.
</font></blockquote><p>
<p>
<table CELLPADDING=0 CELLSPACING=0 width="100%" height=18><tr><td width="100%"> </td><td width=18 align="left" bgcolor="#000000"><a href=doc327.html><img src=../doc_images/Hookclose.png id="hookclose" style="height: 17px; width: 17px;" border="0"></a></td><td width=4></td></tr></table></td></tr></table><p>
<!-- EXAMPLE END -->
<a name="e34"><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=ex34.html#e34 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>345</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=ex34.html#e34 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;Example&nbsp;</font> <font color="#000000"> Mirror, Mirror</font></b></a><br>The sorcerer's mirror can, when held up high, form an impression of its surroundings which it then preserves.<p></td><td halign="right" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="rbarrow"><TD width=38px height=30px align="left" valign="center"><a  href=Rex34.html#e34 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><i>RB</i></div></a></TD></TR></TABLE></td></tr></table>
<p><hr><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td width="33%" align="left"><a href=doc326.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Previous</font></a></td><td width="33%" align="center"><a href=../index.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Contents</font></a></td><td width="33%" align="right"><a href=doc328.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Next</font></a></td></tr></table></font></body></html>
