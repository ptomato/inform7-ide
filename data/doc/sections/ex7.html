<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>5.3. Text with numbers</title></head>
<STYLE TYPE="text/css">
<!--
.oval, .oval TD
{
background-image:url('../doc_images/ovoid.png');
color:white;
}
-->
</STYLE>
<body><font size=2><table CELLPADDING=0 CELLSPACING=0 width="100%" bgcolor="#000000"><tr><TD width=38px height=26px align="center" valign="center"><a href=doc68.html border=0><img border=0 src=../doc_images/Hookleft.png id="hookleft" style="height: 24px; width: 32px;" border=0></a></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><a href=../chap5.html STYLE="text-decoration: none"><font color="#FFFFFF" size=2>Chapter 5: Text</font></a></td><TD width=56px height=26px align="right" valign="center"><a href=../index.html border=0><img border=0 src=../doc_images/Hookup.png id="hookup" style="height: 24px; width: 24px;" border=0></a><a href=doc70.html border=0><img border=0 src=../doc_images/Hookright.png id="hookright" style="height: 24px; width: 32px;" border=0></a></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD height=8px halign="center" valign="center"></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD width=38px halign="center" valign="center"></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><font color="#000000" size="3"><b>5.3. Text with numbers</b></font></td></tr></table>
<p>
<p>When a numerical value is given in a square-bracketed substitution, it is ordinarily printed out in digits. Thus:
<p>
<blockquote><font color="#000080">&quot;You've been wandering around for [turn count] turns now.&quot;
</font></blockquote><p>
<p>
<p>might print as &quot;You've been wandering around for 213 turns now.&quot;, if the game has been played out for exactly that many commands. Alternatively, we can add &quot;...in words&quot;, thus:
<p>
<blockquote><font color="#000080">&quot;You've been wandering around for [turn count in words] turns now.&quot;
</font></blockquote><p>
<p>
<p>to get the more conversational &quot;You've been wandering around for two hundred and thirteen turns now.&quot;
<p>
<p>Either way, though, there is some risk of the following:
<p>
<blockquote><font color="#000080">You've been wandering around for one turns now.
</font></blockquote><p>
<p>
<p>We can avoid this using the special substitution &quot;[s]&quot;, which prints a letter &quot;s&quot; unless the last number printed was 1. So:
<p>
<blockquote><font color="#000080">&quot;You've been wandering around for [turn count in words] turn[s] now.&quot;
</font></blockquote><p>
<p>
<p>will produce &quot;... for one turn now.&quot; or &quot;... for two turns now.&quot; as appropriate. This only solves one case (what about all the other plural endings, from &quot;women&quot; to &quot;cherubim&quot;?), and as we shall see we can get the same effect and very much more using the methods in the next section, so &quot;[s]&quot; is something of an anomaly. But it's memorable, and even if it only solves one small need, this is a need which turns up often.
<p>
<p><hr><p>
<a name="e7"><table CELLPADDING=0 CELLSPACING=0><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=doc69.html#e7 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>46</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font size=2><a href=doc69.html#e7 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;<b>Example</b>&nbsp;</font> <font color="#000000"> Ballpark</font></b></a><br>A new "to say" definition which allows the author to say "[a number in round numbers]" and get verbal descriptions like "a couple of" or "a few" as a result.<p></td></tr></table>
<table border=0 bgcolor="#f0f0f0" width=100%><tr><td><font size=2><p>
<p>Sometimes it is more sensible to describe numbers roughly than in exact terms. For instance, we might want to have our player perceive &quot;many people&quot; rather than &quot;forty-two people&quot; on entering a room. To achieve this, we might write our own &quot;to say&quot; phrase.
<p>
<blockquote><font color="#000080"><script language="JavaScript">
function pasteCode95(code) {
    var myProject = external.Project;

    myProject.selectView('source');
    myProject.pasteCode('"Ballpark"\n\nTo say (count - a number) in round numbers:\n\trepeat through the Table of Numerical Approximation\n\tbegin;\n\t\tif count is less than threshold entry\n\t\tbegin;\n\t\t\tsay "[approximation entry]";\n\t\t\trule succeeds;\n\t\tend if;\n\tend repeat.\n\n[Phrases will be explained more thoroughly in a later chapter, but as we have already seen in the examples, we can make a "To say..." phrase that will allow us to create our own text substitutions. In this case, we are going to replace the specific number with a vaguer one chosen from a chart, so:]\n\nTable of Numerical Approximation\nthreshold\tapproximation\n1\t"no"\n2\t"one"\n3\t"a couple of"\n6\t"a few"\n11\t"some"\n21\t"many"\n1000\t"lots and lots of"\n\n[The idea here is that we will work our way through the table until we hit a line where the threshold number is higher than the number we want to express, and then print that output: so if we have less than one item, we\'ll print "no"; if we have more than none but less than two, we\'ll print "one"; if we have less than three, we\'ll print "a couple of"; if we have three, four, or five (but not six), we\'ll print "a few."]\n\nA room has a number called the population. The population of a room is usually 0. The description of a room is usually "You observe [population of the location in round numbers] [if population of the location is 1]person [otherwise]people [end if]here.".\n\nThe Stadium is a room. The Hot Dog Stand is west of the Stadium. The Women\'s Restroom is south of the Stadium.\n\nThe population of the Stadium is 500. The population of the Hot Dog Stand is 3. The population of the Restroom is 750.\n\nTest me with "w / e / s".\n');
}
</script>
<a href="javascript:pasteCode95()"><img border=0 src=../doc_images/paste.png></a> &quot;Ballpark&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">To say (count - a number) in round numbers:
<br>&nbsp;&nbsp;&nbsp;&nbsp;repeat through the Table of Numerical Approximation
<br>&nbsp;&nbsp;&nbsp;&nbsp;begin;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if count is less than threshold entry
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;begin;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say &quot;[approximation entry]&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rule succeeds;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end if;
<br>&nbsp;&nbsp;&nbsp;&nbsp;end repeat.
</font></blockquote><p>
<p>
<p>Phrases will be explained more thoroughly in a later chapter, but as we have already seen in the examples, we can make a &quot;To say...&quot; phrase that will allow us to create our own text substitutions. In this case, we are going to replace the specific number with a vaguer one chosen from a chart, so:
<p>
<blockquote><font color="#000080">Table of Numerical Approximation
<br><table border="0" valign="top" cellpadding="0" cellspacing="0"><tr><td valign="top"><font size=2 color="#000080">threshold</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font size=2 color="#000080">approximation</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font size=2 color="#000080">1</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font size=2 color="#000080">&quot;no&quot;</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font size=2 color="#000080">2</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font size=2 color="#000080">&quot;one&quot;</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font size=2 color="#000080">3</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font size=2 color="#000080">&quot;a couple of&quot;</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font size=2 color="#000080">6</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font size=2 color="#000080">&quot;a few&quot;</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font size=2 color="#000080">11</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font size=2 color="#000080">&quot;some&quot;</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font size=2 color="#000080">21</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font size=2 color="#000080">&quot;many&quot;</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font size=2 color="#000080">1000</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font size=2 color="#000080">&quot;lots and lots of&quot;</font>&nbsp;&nbsp;&nbsp;</td>
</tr></table>
</font></blockquote><p>
<p>
<p>The idea here is that we will work our way through the table until we hit a line where the threshold number is higher than the number we want to express, and then print that output: so if we have less than one item, we'll print &quot;no&quot;; if we have more than none but less than two, we'll print &quot;one&quot;; if we have less than three, we'll print &quot;a couple of&quot;; if we have three, four, or five (but not six), we'll print &quot;a few.&quot;
<p>
<blockquote><font color="#000080">A room has a number called the population. The population of a room is usually 0. The description of a room is usually &quot;You observe [population of the location in round numbers] [if population of the location is 1]person [otherwise]people [end if]here.&quot;.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The Stadium is a room. The Hot Dog Stand is west of the Stadium. The Women's Restroom is south of the Stadium.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The population of the Stadium is 500. The population of the Hot Dog Stand is 3. The population of the Restroom is 750.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Test me with &quot;w / e / s&quot;.
</font></blockquote><p>
<table CELLPADDING=0 CELLSPACING=0 width="100%" height=18><tr><td width="100%"> </td><td width=18 align="left" bgcolor="#000000"><a href=doc69.html><img src=../doc_images/Hookclose.png id="hookclose" style="height: 17px; width: 17px;" border="0"></a></td><td width=4></td><td width=18 align="left" bgcolor="#000000"><a href=../recipes.html><img src=../doc_images/Hookrecipe.png id="hookrecipe" style="height: 17px; width: 17px;" border="0"></a></td><td width=4></td><td width=18 align="left" bgcolor="#000000"><a href=../examples.html><img src=../doc_images/Hookindex.png id="hookindex" style="height: 17px; width: 17px;" border="0"></a></td></tr></table></td></tr></table><p><p><hr><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td width="33%" align="left"><a href=doc68.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Previous</font></a></td><td width="33%" align="center"><a href=../index.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Contents</font></a></td><td width="33%" align="right"><a href=doc70.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Next</font></a></td></tr></table></font></body></html>
