<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>13.11. Indirect relations</title></head>
<STYLE TYPE="text/css">
<!--
.oval, .oval TD
{
background-image:url('../doc_images/ovoid.png');
color:white;
}
-->
</STYLE>
<body><font size=2><table CELLPADDING=0 CELLSPACING=0 width="100%" bgcolor="#000000"><tr><TD width=38px height=26px align="center" valign="center"><a href=doc198.html border=0><img border=0 src=../doc_images/Hookleft.png id="hookleft" style="height: 24px; width: 32px;" border=0></a></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><a href=../chap13.html STYLE="text-decoration: none"><font color="#FFFFFF" size=2>Chapter 13: Relations</font></a></td><TD width=56px height=26px align="right" valign="center"><a href=../index.html border=0><img border=0 src=../doc_images/Hookup.png id="hookup" style="height: 24px; width: 24px;" border=0></a><a href=doc200.html border=0><img border=0 src=../doc_images/Hookright.png id="hookright" style="height: 24px; width: 32px;" border=0></a></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD height=8px halign="center" valign="center"></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD width=38px halign="center" valign="center"></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><font color="#000000" size="3"><b>13.11. Indirect relations</b></font></td></tr></table>
<p>
<p>We have already seen, in the chapter on Descriptions which is a forerunner of this one, that Inform provides not only &quot;adjacent&quot; as a way of seeing if one room is directly connected to another, but also &quot;the best route from A to B&quot;, which allows us to see if any sequence of moves connects them.
<p>
<p>Something similar - in fact, simpler - is allowed for any relation. Suppose we would like to go sledging: we can go downhill, but not up. Some quite distant places may be reachable, while others close by may not be, even if lower than us, because they would involve climbing again at some point. The following would implement this:
<p>
<blockquote><font color="#000080"><script language="JavaScript">
function pasteCode34(code) {
    var myProject = external.Project;

    myProject.selectView('source');
    myProject.pasteCode('Overlooking relates various rooms to various rooms.\n\nThe verb to overlook (it overlooks, they overlook, it overlooked, it is overlooked, it is overlooking) implies the overlooking relation.\n\nThe Garden overlooks the Shrubbery. The Folly overlooks the Garden. The Shrubbery overlooks the Sundial Plot. The Old Ice House overlooks the Garden.\n\nAfter looking:\n\tsay "This wintry vantage point overlooks [the list of rooms overlooked by the location].";\n\tlet the way be the next step via the overlooking relation from the location to the Sundial Plot;\n\tif the way is a room, say "To sledge downhill to the Sundial, aim for [the way].";\n\totherwise say "It is not possible to sledge downhill to the Sundial."\n\n');
}
</script>
<a href="javascript:pasteCode34()"><img border=0 src=../doc_images/paste.png></a> Overlooking relates various rooms to various rooms.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The verb to overlook (it overlooks, they overlook, it overlooked, it is overlooked, it is overlooking) implies the overlooking relation.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The Garden overlooks the Shrubbery. The Folly overlooks the Garden. The Shrubbery overlooks the Sundial Plot. The Old Ice House overlooks the Garden.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">After looking:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;This wintry vantage point overlooks [the list of rooms overlooked by the location].&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;let the way be the next step via the overlooking relation from the location to the Sundial Plot;
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the way is a room, say &quot;To sledge downhill to the Sundial, aim for [the way].&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;otherwise say &quot;It is not possible to sledge downhill to the Sundial.&quot;
</font></blockquote><p>
<p>
<p>Another example would be the &quot;six degrees of separation&quot; game, where it is claimed that any two people on Earth are connected by a sequence of up to six acquaintances. In an Inform implementation, we might talk about &quot;the next step via the friendship relation from George Bush to Saddam Hussein&quot;, for instance, a phrase likely to evaluate to Donald Rumsfeld, and then
<p>
<blockquote><font color="#000080">the number of steps via the friendship relation from George Bush to Saddam Hussein
</font></blockquote><p>
<p>
<p>would be... but that would be telling.
<p>
<p>We can calculate the number of steps like this for any of the relations we have defined so far: it works exactly analogously to &quot;the number of moves from A to B&quot;, which reads the map. The same conventions apply: the result is 0 if the two things are the same, and -1 if there is no way to get from one to the other. (For &quot;any of the relations... so far&quot;, not &quot;for any relation&quot;: we are not able to calculate such things for relations which express conditions, as we shall see in the next section.)
<p>
<p><hr><p>
<a name="e27"><table CELLPADDING=0 CELLSPACING=0><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=doc199.html#e27 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>182</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font size=2><a href=doc199.html#e27 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;<b>Example</b>&nbsp;</font> <font color="#000000"> The Problem of Edith</font></b></a><br>A conversation in which the main character tries to build logical connections between what the player is saying now and what went immediately before.<p></td></tr></table>
<table border=0 bgcolor="#f0f0f0" width=100%><tr><td><font size=2><p>
<p>Suppose that we have a core set of issues we want to be able to bring up with all the characters, and we want characters to draw intelligent connections between different conversation topics. We will need some model of how things relate to one another, so:
<p>
<blockquote><font color="#000080"><script language="JavaScript">
function pasteCode118(code) {
    var myProject = external.Project;

    myProject.selectView('source');
    myProject.pasteCode('"The Problem of Edith"\n\nSuggestion relates things to each other. The verb to suggest (it suggests, they suggest, it is suggested) implies the suggestion relation.\n\nA subject is a kind of thing. The current subject is a thing that varies. The current subject is greeting.\n\nUnderstand "ask [someone] about [any subject]" as asking it about the subject. Understand "tell [someone] about [any subject]" as asking it about the subject.\n\nAsking it about the subject is an action applying to two things.\n\nCarry out asking it about the subject:\n\tsay "\'Hmm, [the second noun],\' says [the noun]. ";\n\trelate the current subject with the second noun;\n\tchange the current subject to the second noun.\n\n[And if we wanted to offer the player some hints about angles he could pursue:]\n\nInstead of thinking:\n\tsay "You contemplate [list of things suggested by the current subject]."\n\n[For that matter, we could use the same system to have characters make sense of any physical evidence the character shows them:]\n\nInstead of showing something which suggests the current subject to someone:\n\tsay "[The second noun] nods impatiently."\n\nInstead of showing something to someone:\n\tlet the next subject be the next step via the suggestion relation from the noun to the current subject;\n\tif the next subject is a subject\n\tbegin;\n\t\ttry asking the second noun about the subject the next subject;\n\totherwise;\n\t\tsay "[The second noun] shrugs.";\n\tend if.\n\nWhen play begins:\n\tchange the left hand status line to "Discussing: [current subject]";\n\tchange the right hand status line to " ".\n\nBroughton Hall is a room. Lady Uckfield is a woman in Broughton Hall. "Lady Uckfield sits at her desk, looking wholly composed."\n\nThe nasty letter is a thing carried by the player. The nasty letter suggests infidelity and penmanship. The ten-pound note is carried by the player. It suggests money.\n\nInfidelity is a subject. Infidelity suggests marriage and divorce. Marriage suggests love. Marriage, love, and divorce are subjects.\n\nPenmanship is a subject. Penmanship suggests education. Education is a subject. Class status and money are subjects. Class status suggests education. Money suggests class status and marriage.\n\nThe current subject is divorce.\n\n[Now we can define what gets said when the subject is changed, regardless of whether the segue was introduced in speech or by a shown object. Since rows are blanked after use, the speaker will never repeat herself; if we provide more than one line about the same pair of topics, the first one will be used, then the second, and so on, until the table runs out:]\n\nTo relate (initial - a subject) with (next - a subject):\n\trepeat through Table of Remarks\n\tbegin;\n\t\tif the initial is starting entry and the next is the final entry\n\t\tbegin;\n\t\t\tsay "[comment entry][paragraph break]";\n\t\t\tblank out the whole row;\n\t\t\trule succeeds;\n\t\tend if;\n\tend repeat;\n\tsay paragraph break.\n\nTable of Remarks\nstarting\tfinal\tcomment\ndivorce\tlove\t"\'As it seems to me, all the love is on one side,\' she says crisply. \'And that rarely works.\'"\ndivorce\tlove\t"\'Stop making that plea: it won\'t work.\'"\ndivorce\tinfidelity\t"\'Frankly, I rather think there would have been cause enough for divorce without the perversely plentiful evidence of unfaithfulness.\'"\ndivorce\tmoney\t"\'If you mean that the divorce will be expensive, I know it,\' she says. \'But I can think of no happier investment.\'"\nmarriage\tmoney\t"\'If you wish me to understand that it was a marriage for money, you could have spared your energy. That was patent from the outset.\'"\ninfidelity\tmoney\t"\'I\'m sorry, but I don\'t see how having married for money excuses a subsequent infidelity.\'"\n\n[If we had more than one character in the scenario, we could provide multiple tables, but this will do to demonstrate the idea.]\n\n[Of course, we can override specific instances, if we want the character always to say the same thing regardless of how we came to this point:]\n\nInstead of asking Lady Uckfield about the subject penmanship:\n\tchange the current subject to penmanship;\n\tsay "She sighs. \'So few people write really beautifully these days.\'"\n\nTest me with "think / ask lady about infidelity / show nasty letter to lady / show note to lady / think / ask lady about divorce / ask lady about love / ask lady about marriage / ask lady about divorce / ask lady about love / ask lady about penmanship".\n\n');
}
</script>
<a href="javascript:pasteCode118()"><img border=0 src=../doc_images/paste.png></a> &quot;The Problem of Edith&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Suggestion relates things to each other. The verb to suggest (it suggests, they suggest, it is suggested) implies the suggestion relation.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">A subject is a kind of thing. The current subject is a thing that varies. The current subject is greeting.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Understand &quot;ask [someone] about [any subject]&quot; as asking it about the subject. Understand &quot;tell [someone] about [any subject]&quot; as asking it about the subject.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Asking it about the subject is an action applying to two things.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Carry out asking it about the subject:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;'Hmm, [the second noun],' says [the noun]. &quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;relate the current subject with the second noun;
<br>&nbsp;&nbsp;&nbsp;&nbsp;change the current subject to the second noun.
</font></blockquote><p>
<p>
<p>And if we wanted to offer the player some hints about angles he could pursue:
<p>
<blockquote><font color="#000080">Instead of thinking:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;You contemplate [list of things suggested by the current subject].&quot;
</font></blockquote><p>
<p>
<p>For that matter, we could use the same system to have characters make sense of any physical evidence the character shows them:
<p>
<blockquote><font color="#000080">Instead of showing something which suggests the current subject to someone:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;[The second noun] nods impatiently.&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Instead of showing something to someone:
<br>&nbsp;&nbsp;&nbsp;&nbsp;let the next subject be the next step via the suggestion relation from the noun to the current subject;
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the next subject is a subject
<br>&nbsp;&nbsp;&nbsp;&nbsp;begin;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try asking the second noun about the subject the next subject;
<br>&nbsp;&nbsp;&nbsp;&nbsp;otherwise;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say &quot;[The second noun] shrugs.&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;end if.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">When play begins:
<br>&nbsp;&nbsp;&nbsp;&nbsp;change the left hand status line to &quot;Discussing: [current subject]&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;change the right hand status line to &quot; &quot;.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Broughton Hall is a room. Lady Uckfield is a woman in Broughton Hall. &quot;Lady Uckfield sits at her desk, looking wholly composed.&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The nasty letter is a thing carried by the player. The nasty letter suggests infidelity and penmanship. The ten-pound note is carried by the player. It suggests money.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Infidelity is a subject. Infidelity suggests marriage and divorce. Marriage suggests love. Marriage, love, and divorce are subjects.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Penmanship is a subject. Penmanship suggests education. Education is a subject. Class status and money are subjects. Class status suggests education. Money suggests class status and marriage.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The current subject is divorce.
</font></blockquote><p>
<p>
<p>Now we can define what gets said when the subject is changed, regardless of whether the segue was introduced in speech or by a shown object. Since rows are blanked after use, the speaker will never repeat herself; if we provide more than one line about the same pair of topics, the first one will be used, then the second, and so on, until the table runs out:
<p>
<blockquote><font color="#000080">To relate (initial - a subject) with (next - a subject):
<br>&nbsp;&nbsp;&nbsp;&nbsp;repeat through Table of Remarks
<br>&nbsp;&nbsp;&nbsp;&nbsp;begin;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if the initial is starting entry and the next is the final entry
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;begin;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say &quot;[comment entry][paragraph break]&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;blank out the whole row;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rule succeeds;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end if;
<br>&nbsp;&nbsp;&nbsp;&nbsp;end repeat;
<br>&nbsp;&nbsp;&nbsp;&nbsp;say paragraph break.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Table of Remarks
<br><table border="0" valign="top" cellpadding="0" cellspacing="0"><tr><td valign="top"><font size=2 color="#000080">starting</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font size=2 color="#000080">final</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font size=2 color="#000080">comment</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font size=2 color="#000080">divorce</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font size=2 color="#000080">love</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font size=2 color="#000080">&quot;'As it seems to me, all the love is on one side,' she says crisply. 'And that rarely works.'&quot;</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font size=2 color="#000080">divorce</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font size=2 color="#000080">love</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font size=2 color="#000080">&quot;'Stop making that plea: it won't work.'&quot;</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font size=2 color="#000080">divorce</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font size=2 color="#000080">infidelity</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font size=2 color="#000080">&quot;'Frankly, I rather think there would have been cause enough for divorce without the perversely plentiful evidence of unfaithfulness.'&quot;</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font size=2 color="#000080">divorce</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font size=2 color="#000080">money</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font size=2 color="#000080">&quot;'If you mean that the divorce will be expensive, I know it,' she says. 'But I can think of no happier investment.'&quot;</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font size=2 color="#000080">marriage</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font size=2 color="#000080">money</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font size=2 color="#000080">&quot;'If you wish me to understand that it was a marriage for money, you could have spared your energy. That was patent from the outset.'&quot;</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font size=2 color="#000080">infidelity</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font size=2 color="#000080">money</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font size=2 color="#000080">&quot;'I'm sorry, but I don't see how having married for money excuses a subsequent infidelity.'&quot;</font>&nbsp;&nbsp;&nbsp;</td>
</tr></table>
</font></blockquote><p>
<p>
<p>If we had more than one character in the scenario, we could provide multiple tables, but this will do to demonstrate the idea.
<p>
<p>Of course, we can override specific instances, if we want the character always to say the same thing regardless of how we came to this point:
<p>
<blockquote><font color="#000080">Instead of asking Lady Uckfield about the subject penmanship:
<br>&nbsp;&nbsp;&nbsp;&nbsp;change the current subject to penmanship;
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;She sighs. 'So few people write really beautifully these days.'&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Test me with &quot;think / ask lady about infidelity / show nasty letter to lady / show note to lady / think / ask lady about divorce / ask lady about love / ask lady about marriage / ask lady about divorce / ask lady about love / ask lady about penmanship&quot;.
</font></blockquote><p>
<p>
<p>We would have to be careful about this system, since we have applied a various-to-various relation to every single object in the game. In practice it would probably be wisest to restrict it a bit, with judicious definitions of kind and so on.
<table CELLPADDING=0 CELLSPACING=0 width="100%" height=18><tr><td width="100%"> </td><td width=18 align="left" bgcolor="#000000"><a href=doc199.html><img src=../doc_images/Hookclose.png id="hookclose" style="height: 17px; width: 17px;" border="0"></a></td><td width=4></td><td width=18 align="left" bgcolor="#000000"><a href=../recipes.html><img src=../doc_images/Hookrecipe.png id="hookrecipe" style="height: 17px; width: 17px;" border="0"></a></td><td width=4></td><td width=18 align="left" bgcolor="#000000"><a href=../examples.html><img src=../doc_images/Hookindex.png id="hookindex" style="height: 17px; width: 17px;" border="0"></a></td></tr></table></td></tr></table><p><p><hr><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td width="33%" align="left"><a href=doc198.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Previous</font></a></td><td width="33%" align="center"><a href=../index.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Contents</font></a></td><td width="33%" align="right"><a href=doc200.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Next</font></a></td></tr></table></font></body></html>
