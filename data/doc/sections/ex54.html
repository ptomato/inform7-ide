<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>16.2. New commands for old grammar</title></head>
<STYLE TYPE="text/css">
<!--
.oval, .oval TD
{
background-image:url('../doc_images/ovoid.png');
color:white;
}
-->
</STYLE>
<body>
<!-- SEARCH TITLE "Cloak of Darkness" -->
<!-- SEARCH SECTION "Ex 221" -->
<!-- SEARCH SORT "Ex 016-002-221" -->
<font size=2><table CELLPADDING=0 CELLSPACING=0 width="100%" bgcolor="#000000"><tr><TD width=38px height=26px align="center" valign="center"><a href=doc238.html border=0><img border=0 src=../doc_images/Hookleft.png id="hookleft" style="height: 24px; width: 32px;" border=0></a></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><a href=../chap16.html STYLE="text-decoration: none"><font color="#FFFFFF" size=2>Chapter 16: Understanding</font></a></td><TD width=56px height=26px align="right" valign="center"><a href=../index.html border=0><img border=0 src=../doc_images/Hookup.png id="hookup" style="height: 24px; width: 24px;" border=0></a><a href=doc240.html border=0><img border=0 src=../doc_images/Hookright.png id="hookright" style="height: 24px; width: 32px;" border=0></a></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD height=8px halign="center" valign="center"></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD width=38px halign="center" valign="center"></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><font color="#000000" size="3"><b>16.2. New commands for old grammar</b></font></td></tr></table>
<p>
<p>In the photography example, we are providing entirely new grammar for an action  not ordinarily built in to Inform. But we often want simply to provide alternative grammar for existing actions, or even to put new interpretations on commands that Inform already recognises. For instance:
<p>
<blockquote><font color="#000080">Understand &quot;deposit [something] in [an open container]&quot; as inserting it into.
</font></blockquote><p>
<p>
<p>The inserting action is built in to Inform, but the command &quot;deposit&quot; is not, so this is created as new. It is occasionally useful to put a twist on this:
<p>
<blockquote><font color="#000080">Understand &quot;fill [an open container] with [something]&quot; as inserting it into (with nouns reversed).
</font></blockquote><p>
<p>
<p>The clause &quot;(with nouns reversed)&quot; tells Inform to exchange the two nouns parsed, which is necessary because the inserting action expects the noun to be the item and the second noun to be the container, not vice versa.
<p>
<p>The following example:
<p>
<blockquote><font color="#000080">Understand &quot;access [something]&quot; as opening.
</font></blockquote><p>
<p>
<p>might look as if it makes &quot;access&quot; behave just like &quot;open&quot; when the player types it, but that's not so: &quot;open&quot; can also be used in constructions like &quot;open the door with the brass key&quot;, in which case it is understood as the unlocking action. We could add another line to make &quot;access&quot; behave this way too, but if what we really want is to make &quot;access&quot; behave just like &quot;open&quot;, it's easier simply to say so:
<p>
<blockquote><font color="#000080">Understand the command &quot;access&quot; as &quot;open&quot;.
</font></blockquote><p>
<p>
<p>This is very useful when adding a new command which needs synonyms:
<p>
<blockquote><font color="#000080">Understand the commands &quot;snap&quot; and &quot;picture&quot; as &quot;photograph&quot;.
</font></blockquote><p>
<p>
<p>We can check the current stock of commands by looking at the table in the Actions index: for instance, before making &quot;snap&quot; synonymous with &quot;photograph&quot;, it might be wise to check that it is not already defined as a command for breaking something.
<p>
<p><hr><p>
<a name="e108"><table CELLPADDING=0 CELLSPACING=0><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=ex108.html#e108 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>219</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font size=2><a href=ex108.html#e108 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;Example&nbsp;</font> <font color="#000000"> Anchorite</font></b></a><br>By default, Inform understands GET OFF, GET UP, or GET OUT when the player is sitting or standing on an enterable object. We might also want to add GET DOWN and DOWN as exit commands, though:<p></td></tr></table>
<a name="e4"><table CELLPADDING=0 CELLSPACING=0><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=ex4.html#e4 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>220</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font size=2><a href=ex4.html#e4 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;Example&nbsp;</font> <font color="#000000"> Alpaca Farm</font></b></a><br>A generic USE action which behaves sensibly with a range of different objects, expanding on the EMPLOY example above.<p></td></tr></table>
<!-- EXAMPLE START -->
<a name="e54"><table CELLPADDING=0 CELLSPACING=0><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=doc239.html#e54 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>221</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font size=2><a href=doc239.html#e54 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;<b>Example</b>&nbsp;</font> <font color="#000000"> Cloak of Darkness</font></b></a><br>Implementation of "Cloak of Darkness", a simple example game that for years has been used to demonstrate the features of IF languages.<p></td></tr></table>
<table border=0 bgcolor="#f0f0f0" width=100%><tr><td><font size=2>
<p>
<p>&quot;Cloak of Darkness&quot; is a brief example game that has been implemented in nearly every IF system currently used. It hasn't got much claim to complexity or richness, but it does exemplify many of the standard things one might want an IF language to be able to do: define descriptions and the results of actions, assign synonyms to nouns, create new verbs, handle darkness, track repeated acts, and so on.
<p>
<p>Here is what the game looks like in Inform:
<p>
<blockquote><font color="#000080"><script language="JavaScript">
function pasteCode147(code) {
    var myProject = external.Project;

    myProject.selectView('source');
    myProject.pasteCode('"Cloak of Darkness"\n\nThe story headline is "A basic IF demonstration."\n\nThe maximum score is 2.\n\n[Whatever room we define first becomes the starting room of the game, in the absence of other instructions:]\n\nFoyer of the Opera House is a room.  "You are standing in a spacious hall, splendidly decorated in red and gold, with glittering chandeliers overhead. The entrance from the street is to the north, and there are doorways south and west."\n\nInstead of going north in the Foyer, say "You\'ve only just arrived, and besides, the weather outside seems to be getting worse."\n\n[We can add more rooms by specifying their relation to the first room. Unless we say otherwise, the connection will automatically be bidirectional, so "The Cloakroom is west of the Foyer" will also mean "The Foyer is east of the Cloakroom":]\n\nThe Cloakroom is west of the Foyer. "The walls of this small room were clearly once lined with hooks, though now only one remains. The exit is a door to the east."\n\nIn the Cloakroom is a supporter called the small brass hook. The hook is scenery. Understand "peg" as the hook.\n\n[Inform will automatically understand any words in the object definition ("small", "brass", and "hook", in this case), but we can add extra synonyms with this sort of Understand command.]\n\nThe description of the hook is "It\'s just a small brass hook, [if something is on the hook]with [a list of things on the hook] hanging on it[otherwise]screwed to the wall[end if]."\n\n[This description is general enough that, if we were to add other hangable items to the game, they would automatically be described correctly as well.]\n\nThe Bar is south of the Foyer. The printed name of the bar is "Foyer Bar". The Bar is dark.  "The bar, much rougher than you\'d have guessed after the opulence of the foyer to the north, is completely empty. There seems to be some sort of message scrawled in the sawdust on the floor."\n\nThe scrawled message is scenery in the Bar. Understand "floor" or "sawdust" as the message.\n\nNeatness is a kind of value. The neatnesses are neat, scuffed, and trampled. The message has a neatness. The message is neat.\n\n[We could if we wished use a number to indicate how many times the player has stepped on the message, but Inform also makes it easy to add descriptive properties of this sort, so that the code remains readable even when the reader does not know what "the number of the message" might mean.]\n\nInstead of examining the message:\n\tincrease score by 1;\n\tsay "The message, neatly marked in the sawdust, reads...";\n\tend the game in victory.\n\n[This second rule takes precedence over the first one whenever the message is trampled. Inform automatically applies whichever rule is most specific:]\n\nInstead of examining the trampled message:\n\tsay "The message has been carelessly trampled, making it difficult to read. You can just distinguish the words...";\n\tend the game saying "You have lost".\n\n[This command advances the state of the message from neat to scuffed and from scuffed to trampled. We can define any kinds of value we like and advance or decrease them in this way:]\n\nInstead of doing something other than going in the bar when in darkness:\n\tif the message is not trampled, change the neatness of the message to the neatness after the neatness of the message;\n\tsay "In the dark? You could easily disturb something."\n\nInstead of going nowhere from the bar when in darkness:\n\tnow the message is trampled;\n\tsay "Blundering around in the dark isn\'t a good idea!"\n\n[This defines an object which is worn at the start of play. Because we have said the player is wearing the item, Inform infers that it is clothing and can be taken off and put on again at will.]\n\nThe player wears a velvet cloak. The cloak can be hung or unhung. Understand "dark" or "black" or "satin" as the cloak. The description of the cloak is "A handsome cloak, of velvet trimmed with satin, and slightly splattered with raindrops. Its blackness is so deep that it almost seems to suck light from the room."\n\nCarry out taking the cloak:\n\tnow the bar is dark.\n\nCarry out putting the unhung cloak on something in the cloakroom:\n\tnow the cloak is hung;\n\tincrease score by 1.\n\nCarry out putting the cloak on something in the cloakroom:\n\tnow the bar is lit.\n\nCarry out dropping the cloak in the cloakroom:\n\tnow the bar is lit.\n\nInstead of dropping or putting the cloak on when the player is not in the cloakroom:\n\tsay "This isn\'t the best place to leave a smart cloak lying around."\n\nWhen play begins:\n\tsay "[paragraph break]Hurrying through the rainswept November night, you\'re glad to see the bright lights of the Opera House. It\'s surprising that there aren\'t more people about but, hey, what do you expect in a cheap demo game...?"\n\nUnderstand "hang [something preferably held] on [something]" as putting it on.\n\nTest me with "s / n / w / inventory / hang cloak on hook / e / s / read message".\n\n');
}
</script>
<a href="javascript:pasteCode147()"><img border=0 src=../doc_images/paste.png></a> &quot;Cloak of Darkness&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The story headline is &quot;A basic IF demonstration.&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The maximum score is 2.
</font></blockquote><p>
<p>
<p>Whatever room we define first becomes the starting room of the game, in the absence of other instructions:
<p>
<blockquote><font color="#000080">Foyer of the Opera House is a room.  &quot;You are standing in a spacious hall, splendidly decorated in red and gold, with glittering chandeliers overhead. The entrance from the street is to the north, and there are doorways south and west.&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Instead of going north in the Foyer, say &quot;You've only just arrived, and besides, the weather outside seems to be getting worse.&quot;
</font></blockquote><p>
<p>
<p>We can add more rooms by specifying their relation to the first room. Unless we say otherwise, the connection will automatically be bidirectional, so &quot;The Cloakroom is west of the Foyer&quot; will also mean &quot;The Foyer is east of the Cloakroom&quot;:
<p>
<blockquote><font color="#000080">The Cloakroom is west of the Foyer. &quot;The walls of this small room were clearly once lined with hooks, though now only one remains. The exit is a door to the east.&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">In the Cloakroom is a supporter called the small brass hook. The hook is scenery. Understand &quot;peg&quot; as the hook.
</font></blockquote><p>
<p>
<p>Inform will automatically understand any words in the object definition (&quot;small&quot;, &quot;brass&quot;, and &quot;hook&quot;, in this case), but we can add extra synonyms with this sort of Understand command.
<p>
<blockquote><font color="#000080">The description of the hook is &quot;It's just a small brass hook, [if something is on the hook]with [a list of things on the hook] hanging on it[otherwise]screwed to the wall[end if].&quot;
</font></blockquote><p>
<p>
<p>This description is general enough that, if we were to add other hangable items to the game, they would automatically be described correctly as well.
<p>
<blockquote><font color="#000080">The Bar is south of the Foyer. The printed name of the bar is &quot;Foyer Bar&quot;. The Bar is dark.  &quot;The bar, much rougher than you'd have guessed after the opulence of the foyer to the north, is completely empty. There seems to be some sort of message scrawled in the sawdust on the floor.&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The scrawled message is scenery in the Bar. Understand &quot;floor&quot; or &quot;sawdust&quot; as the message.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Neatness is a kind of value. The neatnesses are neat, scuffed, and trampled. The message has a neatness. The message is neat.
</font></blockquote><p>
<p>
<p>We could if we wished use a number to indicate how many times the player has stepped on the message, but Inform also makes it easy to add descriptive properties of this sort, so that the code remains readable even when the reader does not know what &quot;the number of the message&quot; might mean.
<p>
<blockquote><font color="#000080">Instead of examining the message:
<br>&nbsp;&nbsp;&nbsp;&nbsp;increase score by 1;
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;The message, neatly marked in the sawdust, reads...&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;end the game in victory.
</font></blockquote><p>
<p>
<p>This second rule takes precedence over the first one whenever the message is trampled. Inform automatically applies whichever rule is most specific:
<p>
<blockquote><font color="#000080">Instead of examining the trampled message:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;The message has been carelessly trampled, making it difficult to read. You can just distinguish the words...&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;end the game saying &quot;You have lost&quot;.
</font></blockquote><p>
<p>
<p>This command advances the state of the message from neat to scuffed and from scuffed to trampled. We can define any kinds of value we like and advance or decrease them in this way:
<p>
<blockquote><font color="#000080">Instead of doing something other than going in the bar when in darkness:
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the message is not trampled, change the neatness of the message to the neatness after the neatness of the message;
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;In the dark? You could easily disturb something.&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Instead of going nowhere from the bar when in darkness:
<br>&nbsp;&nbsp;&nbsp;&nbsp;now the message is trampled;
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;Blundering around in the dark isn't a good idea!&quot;
</font></blockquote><p>
<p>
<p>This defines an object which is worn at the start of play. Because we have said the player is wearing the item, Inform infers that it is clothing and can be taken off and put on again at will.
<p>
<blockquote><font color="#000080">The player wears a velvet cloak. The cloak can be hung or unhung. Understand &quot;dark&quot; or &quot;black&quot; or &quot;satin&quot; as the cloak. The description of the cloak is &quot;A handsome cloak, of velvet trimmed with satin, and slightly splattered with raindrops. Its blackness is so deep that it almost seems to suck light from the room.&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Carry out taking the cloak:
<br>&nbsp;&nbsp;&nbsp;&nbsp;now the bar is dark.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Carry out putting the unhung cloak on something in the cloakroom:
<br>&nbsp;&nbsp;&nbsp;&nbsp;now the cloak is hung;
<br>&nbsp;&nbsp;&nbsp;&nbsp;increase score by 1.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Carry out putting the cloak on something in the cloakroom:
<br>&nbsp;&nbsp;&nbsp;&nbsp;now the bar is lit.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Carry out dropping the cloak in the cloakroom:
<br>&nbsp;&nbsp;&nbsp;&nbsp;now the bar is lit.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Instead of dropping or putting the cloak on when the player is not in the cloakroom:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;This isn't the best place to leave a smart cloak lying around.&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">When play begins:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;[paragraph break]Hurrying through the rainswept November night, you're glad to see the bright lights of the Opera House. It's surprising that there aren't more people about but, hey, what do you expect in a cheap demo game...?&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Understand &quot;hang [something preferably held] on [something]&quot; as putting it on.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Test me with &quot;s / n / w / inventory / hang cloak on hook / e / s / read message&quot;.
</font></blockquote><p>
<p>
<p>And that's all. As always, type TEST ME to watch the scenario play itself out.
<table CELLPADDING=0 CELLSPACING=0 width="100%" height=18><tr><td width="100%"> </td><td width=18 align="left" bgcolor="#000000"><a href=doc239.html><img src=../doc_images/Hookclose.png id="hookclose" style="height: 17px; width: 17px;" border="0"></a></td><td width=4></td><td width=18 align="left" bgcolor="#000000"><a href=../recipes.html><img src=../doc_images/Hookrecipe.png id="hookrecipe" style="height: 17px; width: 17px;" border="0"></a></td><td width=4></td><td width=18 align="left" bgcolor="#000000"><a href=../examples.html><img src=../doc_images/Hookindex.png id="hookindex" style="height: 17px; width: 17px;" border="0"></a></td></tr></table></td></tr></table><p>
<!-- EXAMPLE END -->
<p><hr><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td width="33%" align="left"><a href=doc238.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Previous</font></a></td><td width="33%" align="center"><a href=../index.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Contents</font></a></td><td width="33%" align="right"><a href=doc240.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Next</font></a></td></tr></table></font></body></html>
